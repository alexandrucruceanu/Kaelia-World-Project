<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaelia - Interactive Map Viewer</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <style>
        body { margin: 0; padding: 0; background-color: #1a1a1a; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        #map { height: 100vh; width: 100vw; background-color: #0b0b0b; }
        .info-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 15px;
            border-radius: 8px;
            max-width: 300px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        h1 { margin: 0 0 10px 0; font-size: 1.2rem; color: #4facfe; }
        p { margin: 0; font-size: 0.9rem; color: #ccc; }
        .leaflet-control-layers {
            background: rgba(0, 0, 0, 0.8) !important;
            color: white !important;
            border: 1px solid #444 !important;
            border-radius: 8px !important;
        }
    </style>
</head>
<body>

<div id="map"></div>

<div class="info-panel">
    <h1>üåç Kaelia Explorer (v2.1)</h1>
    <p>Viewing the biome-corrected world map. Toggle <b>Regional Data</b> to explore key continental hubs and climate zones.</p>
</div>

<script>
    // Configuration
    // The original images are likely 2:1 ratio (Equirectangular)
    // We define a coordinate system that maps the image size to map coordinates.
    // Let's assume a simplified bounds of [[0,0], [1000, 2000]] for easy math.
    
    var map = L.map('map', {
        crs: L.CRS.Simple,
        minZoom: -2,
        maxZoom: 2,
        zoomSnap: 0.5,
        zoomDelta: 0.5
    });

    var bounds = [[0,0], [1000,2000]]; // Y, X

    // Layers
    var satLayer = L.imageOverlay('img/satellite.jpg', bounds);
    var polLayer = L.imageOverlay('img/political.jpg', bounds);
    var altLayer = L.imageOverlay('img/altitude.jpg', bounds);

    // Regional Markers Layer
    var markerLayer = L.layerGroup();

    var regions = [
        {
            name: "Sk√Ωjakot (Gryning)",
            coords: [750, 400],
            biome: "Boreal Forest (Purple)",
            desc: "The 'Cloud House' built atop the Taiga canopy. Powered by the Global Wind-Grid.",
            color: "#8e44ad"
        },
        {
            name: "Oighear (The Frost-Lands)",
            coords: [850, 500],
            biome: "Alpine Tundra (Grey)",
            desc: "Massive permafrost plains. Home to the horse-lords and their Reindeer/Muskox herds.",
            color: "#7f8c8d"
        },
        {
            name: "Ardmore (Keunmor)",
            coords: [700, 250],
            biome: "Alpine/Glacial (White)",
            desc: "Vertical mountain city powered by deep-core geothermal grit.",
            color: "#ecf0f1"
        },
        {
            name: "Yokasy (Kasy Federation)",
            coords: [400, 300],
            biome: "Chaparral (Olive)",
            desc: "Subterranean metropolis harvesting solar UV over Mediterranean scrubland.",
            color: "#556b2f"
        },
        {
            name: "Redez (The Mirelands)",
            coords: [600, 1000],
            biome: "Cold Taiga/Swamp (Purple/Cyan)",
            desc: "Industrial wetland rim specializing in amphibious logistics on Muskeg terrain.",
            color: "#2c3e50"
        },
        {
            name: "Apex (Betereko Plateau)",
            coords: [500, 800],
            biome: "Tropical Plateau",
            desc: "Global leader in Aerospace and Quantum Computing. Primary Spaceport.",
            color: "#d35400"
        },
        {
            name: "NorKunta (Antarmund North)",
            coords: [750, 1600],
            biome: "Arctic Tundra/Taiga",
            desc: "Northern industrial powerhouse exporting heavy robotics and aerospace tech.",
            color: "#34495e"
        },
        {
            name: "Valermond (City of Light)",
            coords: [420, 1750],
            biome: "Deciduous Forest",
            desc: "Center for physics engineering, famous for its vivid seasonal foliage.",
            color: "#27ae60"
        },
        {
            name: "Metsemania (Antarmund South)",
            coords: [320, 1550],
            biome: "Temperate Rainforest",
            desc: "Old-growth Redwood/Sequoia forests utilizing cellulose nanotechnology.",
            color: "#1b4f72"
        },
        {
            name: "Fyny'Dor (The Breadbasket)",
            coords: [250, 1650],
            biome: "Temperate Grassland",
            desc: "The primary agricultural engine of the Eastern Super-Continent.",
            color: "#f1c40f"
        }
    ];

    regions.forEach(function(region) {
        L.circleMarker(region.coords, {
            radius: 8,
            fillColor: region.color,
            color: "#fff",
            weight: 2,
            opacity: 1,
            fillOpacity: 0.8
        }).bindPopup("<b>" + region.name + "</b><br><i>" + region.biome + "</i><br><br>" + region.desc)
          .addTo(markerLayer);
    });

    // Add default layers
    polLayer.addTo(map);
    markerLayer.addTo(map);

    // Fit map to bounds initially
    map.fitBounds(bounds);
    map.setZoom(-0.5);

    // Layer Controls
    var baseMaps = {
        "üó∫Ô∏è Political": polLayer,
        "üõ∞Ô∏è Satellite": satLayer,
        "üèîÔ∏è Altitude Data": altLayer
    };

    var overlayMaps = {
        "üè∑Ô∏è Regional Data": markerLayer
    };

    L.control.layers(baseMaps, overlayMaps, { collapsed: false }).addTo(map);

    // Simple coordinate info for debugging/lore
    map.on('click', function(e) {
        console.log("Map Clicked at:", e.latlng.lat.toFixed(1), e.latlng.lng.toFixed(1));
    });

</script>

</body>
</html>
